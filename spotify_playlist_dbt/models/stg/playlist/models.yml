version: 2

models:
  - name: stg_playlist
    description: Data Model for Store Demand Forecast
    config:
      contract:
        enforced: true
    columns:
      - name: playlist_uri
        description: The key, Spotify uri of the playlist
        data_type: string
        data_tests:
          - not_null
          - unique
      - name: owner
        description: Playlist owner, Spotify username
        data_type: string
        data_tests:
          - not_null
      - name: streams
        description: Number of streams from playlist today
        data_type: int
        data_tests:
          - not_null
      - name: stream30s
        description: Number of streams over 30 sec from playlist today
        data_type: int
        data_tests:
          - not_null
      - name: dau
        description: Number of Daily Active Users. Users with a stream over 30 sec from playlist today
        data_type: int
        data_tests:
          - not_null
      - name: wau
        description: Number of Weekly Active Users. Users with a stream over 30 seconds from playlist in past week
        data_type: int
        data_tests:
          - not_null
      - name: mau
        description: Number of Monthly Active Users. Users with a stream over 30 seconds from playlist in past month
        data_type: int
        data_tests:
          - not_null
      - name: mau_previous_month
        description: Number of Monthly Active Users in the month prior to this one
        data_type: int
        data_tests:
          - not_null
      - name: mau_both_months
        description: Number of users that were active on the playlist both this and the previous month
        data_type: int
        data_tests:
          - not_null
      - name: users
        description: Number of users streaming (all streams) from this playlist this month
        data_type: int
        data_tests:
          - not_null
      - name: skippers
        description: Number of users who skipped more than 90 percent of their streams today
        data_type: int
        data_tests:
          - not_null
      - name: owner_country
        description: Country of the playlist owner
        data_type: string
        data_tests:
          - not_null
      - name: n_tracks
        description: Number of tracks in playlist
        data_type: int
        data_tests:
          - not_null
      - name: n_local_tracks
        description: Change in number of tracks on playlist since yesterday
        data_type: int
        data_tests:
          - not_null
      - name: n_artists
        description: Number of unique artists in playlist
        data_type: int
        data_tests:
          - not_null
      - name: n_albums
        description: Number of unique albums in playlist
        data_type: int
        data_tests:
          - not_null
      - name: monthly_stream30s
        description: Number of streams over 30 seconds this month
        data_type: int
        data_tests:
          - not_null
      - name: monthly_owner_stream30s
        description: Number of streams over 30 seconds by playlist owner this month,
        data_type: int
        data_tests:
          - not_null
      - name: playlist_tokens
        description: List of playlist title tokens, stopwords and punctuation removed
        data_type: array<string>
        data_tests:
          - not_null
      - name: playlist_genre
        description: No. 1 Genre by weight of playlist tracks, from Gracenote metadata
        data_type: array<string>
        data_tests:
          - not_null
      - name: playlist_mood
        description: No. 1 Mood by weight of playlist tracks, from Gracenote metadata
        data_type: array<string>
        data_tests:
          - not_null
